(()=>{async function e(e){ev.preventDefault(),ev.stopPropagation();var a=e.target,t=await FormSubmit.submitForm(a,"user_management/add_useraccount");if(t){var n=a.closest("form"),c=n.querySelector('[name="first_name"]').value,o=n.querySelector('[name="last_name"]').value,l=t.user_id,r=!1;document.querySelectorAll('select[name^="family"]').forEach((e=>{""==e.value&&(r=!0)})),r||document.querySelector('select[name^="family"]').closest("form").querySelector(".add.button").click();var u=document.createElement("option");u.value=l,u.innerHTML=c+" "+o,document.querySelectorAll('select[name^="family"]').forEach((e=>{e.appendChild(u),0==e.selectedIndex&&(e.querySelector(`[value="${l}"]`).defaultSelected=!0)})),Main.displayMessage(t.message,"success")}Main.hideModals()}function a(){Main.showModal("add_account")}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[name="add_user_account_button"]').forEach((e=>e.addEventListener("click",a))),document.querySelectorAll('[name="adduseraccount"]').forEach((a=>a.addEventListener("click",e)))}))})();